<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test Page</title>
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
  </head>
  <body>
    <script>

    function reduceData(dataset, dimension, callback){
        var options = {
            dataset: dataset,
            cube: {
                dimensions: [
                    { name: dimension }
                ],
                measures: [
                    { aggregationOp: "count" }
                ]
            }
        };
        console.log(JSON.stringify(options));
        // Invoke the API for computing data cubes with Spark.
        $.ajax({
            type: "GET",
            url: "reduce_data",
            data: {
                options: JSON.stringify(options)
            },
            success: function(data){
                //callback(JSON.parse(data));
                callback(data);
            }
        });
    }
    reduceData("adult", "race", function(result){
        console.log(result);
    });
    </script>
  </body>
</html>
